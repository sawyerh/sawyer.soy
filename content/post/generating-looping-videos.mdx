---
title: Using DALL-E, Runway, and ffmpeg to generate video loops
draft: true
published_at: 2023-11-04T14:59:30.685Z
category: Article
---

For my site's redesign I've been experimenting with adding subtly moving backgrounds to a few pages. On the homepage, I've used an iPhone photo exported in "live" mode, which I then slowed by 2x using iMovie.

For other parts of the site, I've been experimenting with image and video generators to learn more about their capabilities. In the process, I've learned how to use ffmpeg to edit the videos and optimize them for the web. Below is the process I've followed.

## Generate the image

Using ChatGPT's DALL-E 3 feature, I generated a number of images. This can take some trial-and-error unless you're a prompt engineering expert (unlikely).

![Chat interface with an image prompt and resulting images](/uploads/dall-e-blog-illustration.webp)

## Generate the video

Use Runway to generate a 4 second video from the image.

## Generate the loop

Use ffmpeg:

Create a reversed version of the video:

```sh
ffmpeg -i video.mp4 -vf reverse -an reversed.mp4
```

Concatenate the two videos:

```sh
ffmpeg -i video.mp4 -i reversed.mp4 -filter_complex "[0:v:0] [1:v:0] concat=n=2:v=1 [v]" -map "[v]" -an loop.mp4
```

Create a WebM version for the web, using the AV1 codec (this is very slow to run):

```sh
ffmpeg -i loop.mp4 -c:v libaom-av1 -crf 30 -an output.webm
```

Optionally shrink the dimensions, for example to 500x500:

```sh
ffmpeg -i loop.mp4 -vf scale=500:500 -an loop-500.mp4
```
